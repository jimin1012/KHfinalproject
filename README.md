# KHfinalproject
KH FINAL PROJECT

kh 정보 교육원에서 진행한 파이널 프로젝트


<div align= "center">
    <img src="https://capsule-render.vercel.app/api?type=waving&color=gradient&height=180&text=NOSHOW&animation=&fontColor=000000&fontSize=40" />
</div>
    <h2 style="border-bottom: 1px solid #d8dee4; color: #282d33;"> 프로젝트  소개 </h2> <br> 
     <ul>
         <li>프로젝트 기간 :  2024.02.08 ~ 2024.04.04 (주제선정까지 포함기간) 실제구현은 1달정도</li>
         <li>조원 : 신승민, 양지선, 전지민, 강설민, 윤형식, 박성현, 김황조</li>
         <li>예약 대행 사이트로써 숙박,기차,버스등의 데이터를 공공데이터를 활용하여 가져온뒤 유저에게 화면으로 노출하고 선택한 좌석 혹은 방을 결제하게 한뒤 예약해주는 사이트입니다.</li>
     </ul>
    <h2 style="border-bottom: 1px solid #d8dee4; color: #282d33;"> 개발환경 </h2> <br> 
     <ul>
         <li>사용 기술(언어) : Java, javascript, css, html, jsp, sql(oracle) </li>
         <li>형상관리 : github</li>
     </ul>
     <h2 style="border-bottom: 1px solid #d8dee4; color: #282d33;"> 실행 시 화면 </h2> <br> 
     <ul>
         <li><a href="https://amplified-success-14b.notion.site/65c6493152074601bf0f74df2003a6a6">화면 참조</a></li>
     </ul>
     <h2 style="border-bottom: 1px solid #d8dee4; color: #282d33;">ERD </h2> <br> 
     <img src="https://file.notion.so/f/f/9ea9ba60-1184-44bf-b0b7-c58d1b73dd6a/050ad074-0f01-4b4e-a065-46c89571788b/Untitled.png?id=4b155dd7-65fa-45f5-8890-e95a8ec90716&table=block&spaceId=9ea9ba60-1184-44bf-b0b7-c58d1b73dd6a&expirationTimestamp=1718352000000&signature=I7RR-JFjEEW0ZRbqaRw0OmIvZQtsBb25iViaFHG-sGk&downloadName=Untitled.png">
     <h2 style="border-bottom: 1px solid #d8dee4; color: #282d33;"> SQL문 </h2> <br>
     <details>
         <summary>
             SQL
         </summary>
         <br>
         SQL문 실행순서 : 첫번째 SQL문 -> 프로그램 실행 -> 두번째 SQL문
         <br>
     <pre>
         <code>
/*
--------------- 계정 생성 안되어있다면 실행 ------------------------

-- 오라클 11G 이전 버전의 SQL 작성을 가능하게 하는 구문.
ALTER SESSION SET "_ORACLE_SCRIPT" = TRUE;

-- C## : 일반 사용자(사용자 계정을 의미)

-- 계정 생성
CREATE USER nxshxw IDENTIFIED BY nxshxw1234;

-- 접속, 기본 객체 생성 권한
GRANT CONNECT, RESOURCE TO nxshxw;

-- 객체(테이블 등) 가 생성될 수 있는 공간 할당량 지정
ALTER USER nxshxw DEFAULT TABLESPACE SYSTEM QUOTA UNLIMITED ON SYSTEM;

*/



------------------- drop 구문 테이블 23개 지워져도 되는 거 순서대로 정렬 -----------------

DROP TABLE "FESTIVAL";
DROP TABLE "WISHLIST";
DROP TABLE "RESTAURANT_REVIEW";
DROP TABLE "ACC_RATE";
DROP TABLE "TRANSPORTATION";
DROP TABLE "VOTE";
DROP TABLE "OPTION";
DROP TABLE "POLL";
DROP TABLE "REPORT";
DROP TABLE "ACC_REVIEW";
DROP TABLE "ACC_IMAGE";
DROP TABLE "CHATTING";
DROP TABLE "CHATROOM";
DROP TABLE "COMMENT";
DROP TABLE "MESSAGE";
DROP TABLE "BOARD_LIKE";
DROP TABLE "BOARD";
DROP TABLE "ACC_RESERVATION";
DROP TABLE "RESERVATION";
DROP TABLE "USER";
DROP TABLE "BOARD_TYPE";

DROP TABLE "ACC_GRADE";


DROP TABLE "ACC";
DROP TABLE "BOSS";


--------------------------시퀀스 삭제구문---------------------------------------------

DROP SEQUENCE SEQ_USER_NO;
DROP SEQUENCE SEQ_ACC_NO;
DROP SEQUENCE SEQ_ACC_IMG_NO;
DROP SEQUENCE SEQ_RATE_NO;
DROP SEQUENCE SEQ_A_REV_NO;
DROP SEQUENCE SEQ_RES_NO;
DROP SEQUENCE SEQ_R_REV_NO;
DROP SEQUENCE SEQ_BOARD_NO;
DROP SEQUENCE SEQ_COMMENT_NO;
DROP SEQUENCE SEQ_MESSAGE_NO;
DROP SEQUENCE SEQ_CHATROOM_NO;
DROP SEQUENCE SEQ_CHAT_NO;
DROP SEQUENCE SEQ_OPTION_NO;
DROP SEQUENCE SEQ_A_GRADE_NO;

------------------- create 구문 테이블 23개 ---------------------------






CREATE TABLE "MESSAGE" (
   "MESSAGE_NO" NUMBER   NOT NULL PRIMARY KEY,
   "MESSAGE_CONTENT"   VARCHAR2(3000)   NOT NULL,
   "M_CREATE_DATE"   DATE   DEFAULT SYSDATE   NOT NULL,
   "MESSAGE_DEL_FL"   CHAR(1)   DEFAULT 'N'   NOT NULL,
   "SENDER_NO"   NUMBER      NOT NULL,
   "RECIEVER_NO"   NUMBER      NOT NULL
);

COMMENT ON COLUMN "MESSAGE"."MESSAGE_NO" IS '쪽지번호(시퀀스)';

COMMENT ON COLUMN "MESSAGE"."MESSAGE_CONTENT" IS '쪽지내용';

COMMENT ON COLUMN "MESSAGE"."M_CREATE_DATE" IS '작성일';

COMMENT ON COLUMN "MESSAGE"."MESSAGE_DEL_FL" IS '삭제여부(정상:N, 삭제:Y)';

COMMENT ON COLUMN "MESSAGE"."SENDER_NO" IS '쪽지를 보낸 회원';

COMMENT ON COLUMN "MESSAGE"."RECIEVER_NO" IS '쪽지를 받은 회원';



CREATE TABLE "POLL" (
   "BOARD_NO"   NUMBER      NOT NULL,
   "POLL_TITLE"   VARCHAR2(150)      NOT NULL,
   "POLL_END_DATE"   DATE      NOT NULL,
   "POLL_ST_FL"   CHAR(1)   DEFAULT '1'   NOT NULL
);

COMMENT ON COLUMN "POLL"."BOARD_NO" IS '게시글번호(시퀀스)';

COMMENT ON COLUMN "POLL"."POLL_TITLE" IS '투표제목';

COMMENT ON COLUMN "POLL"."POLL_END_DATE" IS '투표 종료 일자';

COMMENT ON COLUMN "POLL"."POLL_ST_FL" IS '진행중(1), 종료(2)';



CREATE TABLE "BOARD" (
   "BOARD_NO"   NUMBER      NOT NULL PRIMARY KEY,
   "BOARD_TITLE"   VARCHAR2(150)      NOT NULL,
   "BOARD_CONTENT"   CLOB      NOT NULL,
   "CREATE_DATE"   DATE   DEFAULT SYSDATE   NOT NULL,
   "READ_COUNT"   NUMBER   DEFAULT 0   NOT NULL,
   "BOARD_DEL_FL"   CHAR(1)   DEFAULT 'N'   NOT NULL,
   "BOARD_CODE"   NUMBER      NOT NULL,
   "USER_NO"   NUMBER      NOT NULL
);

COMMENT ON COLUMN "BOARD"."BOARD_NO" IS '게시글번호(시퀀스)';

COMMENT ON COLUMN "BOARD"."BOARD_TITLE" IS '게시글 제목';

COMMENT ON COLUMN "BOARD"."BOARD_CONTENT" IS '게시글 내용';

COMMENT ON COLUMN "BOARD"."CREATE_DATE" IS '작성일';

COMMENT ON COLUMN "BOARD"."READ_COUNT" IS '조회수';

COMMENT ON COLUMN "BOARD"."BOARD_DEL_FL" IS '게시글 상태(정상 N 삭제 Y )';

COMMENT ON COLUMN "BOARD"."BOARD_CODE" IS '게시판 코드';

COMMENT ON COLUMN "BOARD"."USER_NO" IS '사용자 번호(SEQ_USER_NO)';



CREATE TABLE "REPORT" (
   "USER_NO"   NUMBER      NOT NULL,
   "BOARD_NO"   NUMBER      NULL,
   "REPLY_NO"   NUMBER      NULL,
   "REPORT_ST_FL"   CHAR(1)   DEFAULT 'W'   NOT NULL,
   "REPORT_CONTENT"   VARCHAR2(1000)      NOT NULL
);

COMMENT ON COLUMN "REPORT"."USER_NO" IS '신고자 번호';

COMMENT ON COLUMN "REPORT"."BOARD_NO" IS '신고된 게시글 번호';

COMMENT ON COLUMN "REPORT"."REPLY_NO" IS '신고된 댓글 번호';

COMMENT ON COLUMN "REPORT"."REPORT_ST_FL" IS '신고 처리 여부(대기:W, 처리:Y, 취소:N)';

COMMENT ON COLUMN "REPORT"."REPORT_CONTENT" IS '신고 사유 내용';



CREATE TABLE "BOARD_TYPE" (
   "BOARD_CODE"   NUMBER      NOT NULL PRIMARY KEY,
   "BOARD_NAME"   VARCHAR2(30)      NOT NULL
);

COMMENT ON COLUMN "BOARD_TYPE"."BOARD_CODE" IS '게시판 코드';

COMMENT ON COLUMN "BOARD_TYPE"."BOARD_NAME" IS '게시판 이름';



CREATE TABLE "COMMENT" (
   "COMMENT_NO"   NUMBER      NOT NULL PRIMARY KEY,
   "COMMENT_CONTENT"   VARCHAR2(4000)      NOT NULL,
   "C_CREATE_DATE"   DATE   DEFAULT SYSDATE   NOT NULL,
   "COMMENT_DEL_FL"   CHAR(1)   DEFAULT 'N'   NOT NULL,
   "USER_NO"   NUMBER      NOT NULL,
   "BOARD_NO"   NUMBER      NOT NULL,
   "COMMENT_STAR"   NUMBER      NULL,
   "PARENT_NO"   NUMBER      NULL
);

COMMENT ON COLUMN "COMMENT"."COMMENT_NO" IS '댓글번호(시퀀스)';

COMMENT ON COLUMN "COMMENT"."COMMENT_CONTENT" IS '댓글 내용';

COMMENT ON COLUMN "COMMENT"."C_CREATE_DATE" IS '댓글 작성일';

COMMENT ON COLUMN "COMMENT"."COMMENT_DEL_FL" IS '삭제여부(정상:N, 삭제:Y)';

COMMENT ON COLUMN "COMMENT"."USER_NO" IS '사용자 번호(SEQ_USER_NO)';

COMMENT ON COLUMN "COMMENT"."BOARD_NO" IS '게시글번호(시퀀스)';

COMMENT ON COLUMN "COMMENT"."COMMENT_STAR" IS '댓글 별점';

COMMENT ON COLUMN "COMMENT"."PARENT_NO" IS '부모댓글 번호';



CREATE TABLE "USER" (
   "USER_NO"   NUMBER      NOT NULL PRIMARY KEY,
   "USER_NAME"   VARCHAR2(50)      NOT NULL,
   "USER_BIRTH"   VARCHAR(8)      NOT NULL,
   "USER_GENDER"   CHAR(1)      NOT NULL,
   "USER_ADDR"   VARCHAR2(300)      NULL,
   "USER_ID"   VARCHAR2(50)      NOT NULL,
   "USER_PW"   VARCHAR2(250)      NOT NULL,
   "USER_NICKNAME"   VARCHAR2(50)      NOT NULL,
   "USER_TEL"   VARCHAR2(11)      NOT NULL,
   "USER_EMAIL"   VARCHAR2(50)      NOT NULL,
   "ENROLL_DATE"   DATE   DEFAULT SYSDATE   NOT NULL,
   "PROFILE_IMG"   VARCHAR2(300),
   "USER_DEL_FL"   CHAR(1 BYTE)   DEFAULT 'N'   NOT NULL,
   "AUTHORITY"   NUMBER   DEFAULT 1   NOT NULL
);

COMMENT ON COLUMN "USER"."USER_NO" IS '사용자 번호(SEQ_USER_NO)';

COMMENT ON COLUMN "USER"."USER_NAME" IS '사용자 이름';

COMMENT ON COLUMN "USER"."USER_BIRTH" IS '사용자 생년월일(-제외)';

COMMENT ON COLUMN "USER"."USER_GENDER" IS '사용자 성별(남자 :  M, 여자 : F)';

COMMENT ON COLUMN "USER"."USER_ADDR" IS '사용자 주소';

COMMENT ON COLUMN "USER"."USER_ID" IS '사용자 아이디';

COMMENT ON COLUMN "USER"."USER_PW" IS '사용자 비밀번호(암호화 적용)';

COMMENT ON COLUMN "USER"."USER_NICKNAME" IS '사용자 닉네임';

COMMENT ON COLUMN "USER"."USER_TEL" IS '사용자 전화번호';

COMMENT ON COLUMN "USER"."USER_EMAIL" IS '사용자 이메일';

COMMENT ON COLUMN "USER"."ENROLL_DATE" IS '사용자 가입일';

COMMENT ON COLUMN "USER"."PROFILE_IMG" IS '프로필 이미지 저장 경로';

COMMENT ON COLUMN "USER"."USER_DEL_FL" IS '탈퇴여부(N:탈퇴X, Y: 탈퇴O)';

COMMENT ON COLUMN "USER"."AUTHORITY" IS '회원권한(일반 : 1, 사업자 : 2, 관리자 : 3)';



CREATE TABLE "BOARD_LIKE" (
   "USER_NO"   NUMBER      NOT NULL,
   "BOARD_NO"   NUMBER      NOT NULL,
    PRIMARY KEY("USER_NO","BOARD_NO")
);

COMMENT ON COLUMN "BOARD_LIKE"."USER_NO" IS '사용자 번호(SEQ_USER_NO)';

COMMENT ON COLUMN "BOARD_LIKE"."BOARD_NO" IS '게시글번호(시퀀스)';


-- 투표 결과 저장 테이블 
CREATE TABLE "VOTE" (
   "USER_NO"   NUMBER      NOT NULL,
   "OPTION_NO"   NUMBER      NOT NULL
);
COMMENT ON COLUMN "VOTE"."USER_NO" IS '투표한 사용자 번호';

COMMENT ON COLUMN "VOTE"."OPTION_NO" IS '투표한 선택지 번호';



CREATE TABLE "ACC_REVIEW" (
   "A_REVIEW_NO"   NUMBER      NOT NULL PRIMARY KEY,
   "A_REVIEW_CONTENT"   VARCHAR2(3000)      NOT NULL,
   "A_CREATE_DATE"   DATE   DEFAULT SYSDATE   NOT NULL,
   "A_REVIEW_DEL_FL"   CHAR(1)   DEFAULT 'N'   NOT NULL,
   "ACC_NO"   NUMBER      NOT NULL,
   "USER_NO"   NUMBER      NOT NULL
);

COMMENT ON COLUMN "ACC_REVIEW"."A_REVIEW_NO" IS '리뷰 번호(SEQ_REV_NO)';

COMMENT ON COLUMN "ACC_REVIEW"."A_REVIEW_CONTENT" IS '리뷰 내용';

COMMENT ON COLUMN "ACC_REVIEW"."A_CREATE_DATE" IS '작성일';

COMMENT ON COLUMN "ACC_REVIEW"."A_REVIEW_DEL_FL" IS '삭제여부(정상:N, 삭제:Y)';

COMMENT ON COLUMN "ACC_REVIEW"."ACC_NO" IS '숙소 번호';

COMMENT ON COLUMN "ACC_REVIEW"."USER_NO" IS '회원 번호';



CREATE TABLE "ACC" (
   "ACC_NO"   NUMBER      NOT NULL PRIMARY KEY,
   "ACC_NAME"   VARCHAR2(100 )      NOT NULL,
   "ACC_TEL"   VARCHAR2(100),
   "ACC_ADDR"   VARCHAR2(300 )      NOT NULL,
   "ACC_ST_FL"   CHAR(1 )   DEFAULT 'R'   NOT NULL,
   "BOSS_NO"   NUMBER      NOT NULL,
   "ACC_CATEGORY"   VARCHAR2(20),
   "OPEN_DATE"   DATE      NOT NULL
);

COMMENT ON COLUMN "ACC"."ACC_NO" IS '숙소 번호(SEQ_ACC_NO)';

COMMENT ON COLUMN "ACC"."ACC_NAME" IS '숙소 이름';

COMMENT ON COLUMN "ACC"."ACC_TEL" IS '숙소 전화번호';


COMMENT ON COLUMN "ACC"."ACC_ADDR" IS '숙소 주소';

COMMENT ON COLUMN "ACC"."ACC_ST_FL" IS 'R(영업준비) Y(영업중) N(휴업중)C(폐업)';

COMMENT ON COLUMN "ACC"."BOSS_NO" IS '사업자번호(-제외)(숫자10자리)';


COMMENT ON COLUMN "ACC"."ACC_CATEGORY" IS '숙소종류(호텔,모텔,펜션)';

COMMENT ON COLUMN "ACC"."OPEN_DATE" IS '개업일 (form 사업자 등록증)';



CREATE TABLE "WISHLIST" (
   "ACC_NO2"   NUMBER      NOT NULL,
   "USER_NO"   NUMBER      NOT NULL,
    PRIMARY KEY("ACC_NO2","USER_NO")
);

COMMENT ON COLUMN "WISHLIST"."ACC_NO2" IS '숙소 번호(SEQ_ACC_NO)';

COMMENT ON COLUMN "WISHLIST"."USER_NO" IS '사용자 번호(SEQ_USER_NO)';



-- 선택지 테이블
CREATE TABLE "OPTION" (
   "OPTION_NO"   NUMBER      NOT NULL,
   "OPTION_CONTENT"   VARCHAR2(150)      NOT NULL,
   "BOARD_NO"   NUMBER      NOT NULL
);

COMMENT ON COLUMN "OPTION"."OPTION_NO" IS '선택지 번호';

COMMENT ON COLUMN "OPTION"."OPTION_CONTENT" IS '선택지 내용';

COMMENT ON COLUMN "OPTION"."OPTION_CONTENT" IS '게시글번호(시퀀스)';



CREATE TABLE "BOSS" (
   "BOSS_NO"   NUMBER      NOT NULL PRIMARY KEY,
   "BOSS_ACCOUNT"   VARCHAR2(30)      NULL,
   "USER_NO"   NUMBER      NOT NULL
);

COMMENT ON COLUMN "BOSS"."BOSS_NO" IS '사업자번호(-제외)(숫자10자리)';

COMMENT ON COLUMN "BOSS"."BOSS_ACCOUNT" IS '입금계좌';

COMMENT ON COLUMN "BOSS"."USER_NO" IS '사용자 번호(SEQ_USER_NO)';



CREATE TABLE "CHATROOM" (
   "CHATROOM_NO"   NUMBER      NOT NULL PRIMARY KEY,
   "CHATROOM_ST_FL"   CHAR(1)   DEFAULT 'N'   NOT NULL,
   "USER_NO"   NUMBER      NOT NULL,
   "MANAGER_NO"   NUMBER      NOT NULL
);

COMMENT ON COLUMN "CHATROOM"."CHATROOM_NO" IS '1:1상담방(채팅방) 번호';

COMMENT ON COLUMN "CHATROOM"."CHATROOM_ST_FL" IS '채팅방 상태(일반:N, 중요:S, 차단:B)';

COMMENT ON COLUMN "CHATROOM"."USER_NO" IS '회원 번호';

COMMENT ON COLUMN "CHATROOM"."MANAGER_NO" IS '관리자 번호';



CREATE TABLE "RESTAURANT_REVIEW" (
   "R_REVIEW_NO"   NUMBER      NOT NULL PRIMARY KEY,
   "R_REVIEW_TITLE"   VARCHAR2(50)      NOT NULL,
   "R_REVIEW_CONTENT"   VARCHAR2(3000)      NOT NULL,
   "R_CREATE_DATE"   DATE   DEFAULT SYSDATE   NOT NULL,
   "R_REVIEW_DEL_FL"   CHAR(1)   DEFAULT 'N'   NOT NULL,
   "R_STAR_POINT"   NUMBER      NOT NULL,
   "USER_NO"   NUMBER      NOT NULL,
   "R_PLACE_NAME"   VARCHAR2(50)      NOT NULL,
   "R_THUMBNAIL"   VARCHAR2(300)      NULL
);

COMMENT ON COLUMN "RESTAURANT_REVIEW"."R_REVIEW_NO" IS '리뷰 번호(SEQ_REV_NO)';

COMMENT ON COLUMN "RESTAURANT_REVIEW"."R_REVIEW_TITLE" IS '글 제목';

COMMENT ON COLUMN "RESTAURANT_REVIEW"."R_REVIEW_CONTENT" IS '리뷰 내용';

COMMENT ON COLUMN "RESTAURANT_REVIEW"."R_CREATE_DATE" IS '작성일';

COMMENT ON COLUMN "RESTAURANT_REVIEW"."R_REVIEW_DEL_FL" IS '삭제여부(정상:N, 삭제:Y)';

COMMENT ON COLUMN "RESTAURANT_REVIEW"."R_STAR_POINT" IS '평점';

COMMENT ON COLUMN "RESTAURANT_REVIEW"."USER_NO" IS '회원 번호(SEQ_USER_NO)';

COMMENT ON COLUMN "RESTAURANT_REVIEW"."R_THUMBNAIL" IS '썸네일이미지';



CREATE TABLE "CHATTING" (
   "CHAT_NO"   NUMBER      NOT NULL PRIMARY KEY,
   "CHAT_CONTENT"   VARCHAR2(1500)      NOT NULL,
   "SEND_TIME"   DATE  DEFAULT SYSDATE   NOT NULL,
   "SENDER_NO"   NUMBER      NOT NULL,
   "CHATROOM_NO"   NUMBER      NOT NULL,
   "READ_ST_FL"   CHAR(1)   DEFAULT 'N'   NOT NULL
);

COMMENT ON COLUMN "CHATTING"."CHAT_NO" IS '채팅 메세지 번호';

COMMENT ON COLUMN "CHATTING"."CHAT_CONTENT" IS '채팅 내용';

COMMENT ON COLUMN "CHATTING"."SEND_TIME" IS '채팅 전송 시간';

COMMENT ON COLUMN "CHATTING"."SENDER_NO" IS '작성자 번호';

COMMENT ON COLUMN "CHATTING"."CHATROOM_NO" IS '1:1상담방(채팅방) 번호';

COMMENT ON COLUMN "CHATTING"."READ_ST_FL" IS '읽음여부(N:안읽음, Y:읽음)';



CREATE TABLE "RESERVATION" (
   "RESERVATION_NO"   NUMBER      NOT NULL PRIMARY KEY,
   "RESERVATION_NAME"   VARCHAR2(500)     NOT NULL,
   "RESERVATION_DEL_FL"   CHAR(1)   DEFAULT 'N'   NOT NULL,
   "RESERV_START_DATE"   VARCHAR2(200)     NOT NULL,
   "RESERV_END_DATE"   VARCHAR2(200)     NOT NULL,
   "PRICE"   NUMBER      NOT NULL,
    "RESERV_TYPE" CHAR(1) NOT NULL,
   "PAY_TIME"   DATE   DEFAULT SYSDATE   NOT NULL,
   "RESERV_UID" VARCHAR2(200) NOT NULL,
   "USER_NO"   NUMBER      NOT NULL
);

COMMENT ON COLUMN "RESERVATION"."RESERV_TYPE" IS '숙소 : A, 기차 :T, 버스 : B';

COMMENT ON COLUMN "RESERVATION"."RESERV_UID" IS '포트원 결제 고유아이디(취소를위해필요)';

COMMENT ON COLUMN "RESERVATION"."RESERVATION_NAME" IS '상품명(예약명)';

COMMENT ON COLUMN "RESERVATION"."RESERVATION_DEL_FL" IS '예약:N /  취소:Y';

COMMENT ON COLUMN "RESERVATION"."RESERV_START_DATE" IS '예약 시작 날짜';

COMMENT ON COLUMN "RESERVATION"."RESERV_END_DATE" IS '예약 끝 날짜';

COMMENT ON COLUMN "RESERVATION"."PRICE" IS '이용 가격';

COMMENT ON COLUMN "RESERVATION"."PAY_TIME" IS '결제한 시간';

COMMENT ON COLUMN "RESERVATION"."USER_NO" IS '사용자 번호(SEQ_USER_NO)';



CREATE TABLE "ACC_GRADE" (
   "ACC_CODE"   NUMBER      NOT NULL,
   "ACC_TYPE"   VARCHAR2(20)      NOT NULL,
   "ROOM_PRICE"   NUMBER      NOT NULL,
   "ROOM_CAPACITY"   NUMBER      NOT NULL,
   "ROOM_CHECKIN" VARCHAR2(50) NOT NULL,
   "ROOM_CHECKOUT" VARCHAR2(50) NOT NULL,
   "ACC_NO"   NUMBER      NOT NULL
);

COMMENT ON COLUMN "ACC_GRADE"."ACC_CODE" IS '객실 번호(SEQ_A_GRADE_NO)';

COMMENT ON COLUMN "ACC_GRADE"."ACC_TYPE" IS '객실 이름(일반, 디럭스, 스위트)';

COMMENT ON COLUMN "ACC_GRADE"."ROOM_PRICE" IS '객실 가격';

COMMENT ON COLUMN "ACC_GRADE"."ROOM_CAPACITY" IS '객실 수용인원';

COMMENT ON COLUMN "ACC_GRADE"."ROOM_CHECKIN" IS '객실 체크인시간';

COMMENT ON COLUMN "ACC_GRADE"."ROOM_CHECKOUT" IS '객실 체크아웃시간';

COMMENT ON COLUMN "ACC_GRADE"."ACC_NO" IS '숙소 번호(SEQ_ACC_NO)';

CREATE TABLE "TRANSPORTATION" (
   "RESERVATION_NO"   NUMBER      NOT NULL ,
   "DEP_PLACE"   VARCHAR2(100)      NOT NULL,
   "ARR_PLACE"   VARCHAR2(100)      NOT NULL,
   "SEAT_NO"   VARCHAR2(30)      NOT NULL,
   "TRANSP_CODE"   NUMBER      NOT NULL,
   "GRADE"   VARCHAR2(20)      NOT NULL,
   "TRAIN_CAR_NO"   NUMBER      NULL
);

COMMENT ON COLUMN "TRANSPORTATION"."DEP_PLACE" IS '출발지';

COMMENT ON COLUMN "TRANSPORTATION"."ARR_PLACE" IS '도착지';

COMMENT ON COLUMN "TRANSPORTATION"."SEAT_NO" IS '좌석번호';

COMMENT ON COLUMN "TRANSPORTATION"."TRANSP_CODE" IS '기차:1 / 버스:2';

COMMENT ON COLUMN "TRANSPORTATION"."GRADE" IS '등급';

COMMENT ON COLUMN "TRANSPORTATION"."TRAIN_CAR_NO" IS '열차칸';



CREATE TABLE "ACC_IMAGE" (
   "ACC_IMG_NO"   NUMBER      NOT NULL PRIMARY KEY,
   "ACC_IMG_RENAME"   VARCHAR2(500)      NOT NULL,
   "ACC_IMG_ORIGINAL"   VARCHAR2(500)      NOT NULL,
   "ACC_IMG_LEVEL"   NUMBER      NULL,
   "ACC_IMG_PATH"   VARCHAR2(500)      NOT NULL,
   "ACC_NO"   NUMBER      NOT NULL
);

COMMENT ON COLUMN "ACC_IMAGE"."ACC_IMG_NO" IS '이미지번호(시퀀스)';

COMMENT ON COLUMN "ACC_IMAGE"."ACC_IMG_RENAME" IS '이미지 변경명';

COMMENT ON COLUMN "ACC_IMAGE"."ACC_IMG_ORIGINAL" IS '이미지 원본명';

COMMENT ON COLUMN "ACC_IMAGE"."ACC_IMG_LEVEL" IS '이미지 위치 지정 번호';

COMMENT ON COLUMN "ACC_IMAGE"."ACC_IMG_PATH" IS '이미지 저장 폴더 경로';

COMMENT ON COLUMN "ACC_IMAGE"."ACC_NO" IS '숙소 번호';



CREATE TABLE "ACC_RATE" (
   "RATE_NO"   NUMBER      NOT NULL PRIMARY KEY,
   "A_CLEAN_RATE"   NUMBER      NOT NULL,
   "A_FAC_RATE"   NUMBER      NOT NULL,
   "A_KIND_RATE"   NUMBER      NOT NULL,
   "A_REVIEW_NO"   NUMBER      NOT NULL
);

COMMENT ON COLUMN "ACC_RATE"."RATE_NO" IS '평점 번호(SEQ_RATE_NO)';

COMMENT ON COLUMN "ACC_RATE"."A_CLEAN_RATE" IS '청결도 평점';

COMMENT ON COLUMN "ACC_RATE"."A_FAC_RATE" IS '시설 평점';

COMMENT ON COLUMN "ACC_RATE"."A_KIND_RATE" IS '직원 친절도 평점';

COMMENT ON COLUMN "ACC_RATE"."A_REVIEW_NO" IS '리뷰 번호(SEQ_REV_NO)';



CREATE TABLE "ACC_RESERVATION" (
   "RESERVATION_NO"   NUMBER      NOT NULL,
   "ACC_NO"   NUMBER      NOT NULL,
   "RES_PEOPLE"   NUMBER      NOT NULL,
   "ACC_CODE"   NUMBER      NOT NULL
);

COMMENT ON COLUMN "ACC_RESERVATION"."ACC_NO" IS '숙소 번호';

COMMENT ON COLUMN "ACC_RESERVATION"."RES_PEOPLE" IS '예약인원';

COMMENT ON COLUMN "ACC_RESERVATION"."ACC_CODE" IS '숙소 분류 코드';



-- 축제 게시판 테이블 추가
CREATE TABLE "FESTIVAL" (
   "BOARD_NO"   NUMBER   NOT NULL,
   "F_START_DATE"   DATE   NOT NULL,
   "F_END_DATE"   DATE   NOT NULL,
   "F_ADDR"   VARCHAR2(300)   NOT NULL,
   "F_PRICE"   NUMBER   NOT NULL,
   "F_HOST"   VARCHAR2(150)   NOT NULL
);

COMMENT ON COLUMN "FESTIVAL"."BOARD_NO" IS '게시글번호';
COMMENT ON COLUMN "FESTIVAL"."F_START_DATE" IS '축제시작날짜';
COMMENT ON COLUMN "FESTIVAL"."F_END_DATE" IS '축제끝날짜';
COMMENT ON COLUMN "FESTIVAL"."F_ADDR" IS '지역';
COMMENT ON COLUMN "FESTIVAL"."F_PRICE" IS '요금';
COMMENT ON COLUMN "FESTIVAL"."F_HOST" IS '주최기관';


------------------------------ 제약 조건 생성 구문---------------------------

-- 외래키 시작




ALTER TABLE "BOARD_LIKE" ADD CONSTRAINT "FK_USER_TO_BOARD_LIKE_1" FOREIGN KEY (
   "USER_NO"
)
REFERENCES "USER" (
   "USER_NO"
);

ALTER TABLE "BOARD_LIKE" ADD CONSTRAINT "FK_BOARD_TO_BOARD_LIKE_1" FOREIGN KEY (
   "BOARD_NO"
)
REFERENCES "BOARD" (
   "BOARD_NO"
);



ALTER TABLE "WISHLIST" ADD CONSTRAINT "FK_ACC_TO_WISHLIST_1" FOREIGN KEY (
   "ACC_NO2"
)
REFERENCES "ACC" (
   "ACC_NO"
);

ALTER TABLE "WISHLIST" ADD CONSTRAINT "FK_USER_TO_WISHLIST_1" FOREIGN KEY (
   "USER_NO"
)
REFERENCES "USER" (
   "USER_NO"
);



ALTER TABLE "TRANSPORTATION" ADD CONSTRAINT "FK_RESERVATION_TO_TRANSPORTATION_1" FOREIGN KEY (
   "RESERVATION_NO"
)
REFERENCES "RESERVATION" (
   "RESERVATION_NO"
);

ALTER TABLE "ACC_RESERVATION" ADD CONSTRAINT "FK_RESERVATION_TO_ACC_RESERVATION_1" FOREIGN KEY (
   "RESERVATION_NO"
)
REFERENCES "RESERVATION" (
   "RESERVATION_NO"
);

ALTER TABLE "ACC_RESERVATION" ADD CONSTRAINT "FK_ACC_TO_ACC_RESERVATION_1" FOREIGN KEY (
   "ACC_NO"
)
REFERENCES "ACC" (
   "ACC_NO"
);

ALTER TABLE "FESTIVAL" ADD CONSTRAINT "PK_FESTIVAL" PRIMARY KEY (
   "BOARD_NO"
);

--기본키 
ALTER TABLE "POLL" ADD CONSTRAINT "PK_POLL" PRIMARY KEY (
   "BOARD_NO"
);
ALTER TABLE "VOTE" ADD CONSTRAINT "PK_VOTE" PRIMARY KEY (
   "USER_NO",
   "OPTION_NO"
);
ALTER TABLE "OPTION" ADD CONSTRAINT "PK_OPTION" PRIMARY KEY (
   "OPTION_NO"
);

ALTER TABLE "TRANSPORTATION" ADD CONSTRAINT "PK_TRANSPORTATION" PRIMARY KEY (
   "RESERVATION_NO"
);

ALTER TABLE "ACC_RESERVATION" ADD CONSTRAINT "PK_ACC_RESERVATION" PRIMARY KEY (
   "RESERVATION_NO"
);



-- 외래
ALTER TABLE "POLL" ADD CONSTRAINT "FK_BOARD_TO_POLL_1" FOREIGN KEY (
   "BOARD_NO"
)
REFERENCES "BOARD" (
   "BOARD_NO"
);

ALTER TABLE "VOTE" ADD CONSTRAINT "FK_USER_TO_VOTE_1" FOREIGN KEY (
   "USER_NO"
)
REFERENCES "USER" (
   "USER_NO"
);

ALTER TABLE "VOTE" ADD CONSTRAINT "FK_OPTION_TO_VOTE_1" FOREIGN KEY (
   "OPTION_NO"
)
REFERENCES "OPTION" (
   "OPTION_NO"
);

ALTER TABLE "ACC_GRADE" ADD CONSTRAINT "PK_ACC_GRADE" PRIMARY KEY (
   "ACC_CODE"
);

ALTER TABLE "ACC_GRADE" ADD CONSTRAINT "FK_ACC_TO_ACC_GRADE" FOREIGN KEY (
   "ACC_NO"
)
REFERENCES "ACC" (
   "ACC_NO"
) ON DELETE CASCADE;

ALTER TABLE "ACC" ADD CONSTRAINT "FK_BOSS_TO_ACC" FOREIGN KEY (
   "BOSS_NO"
)
REFERENCES "BOSS" (
   "BOSS_NO"
) ON DELETE CASCADE;

--USER테이블 USER_NO 연결

ALTER TABLE "BOARD" ADD CONSTRAINT "FK_USER_TO_BOARD" FOREIGN KEY (
   "USER_NO"
)
REFERENCES "USER" (
   "USER_NO"
);

ALTER TABLE "COMMENT" ADD CONSTRAINT "FK_USER_TO_COMMENT" FOREIGN KEY (
   "USER_NO"
)
REFERENCES "USER" (
   "USER_NO"
);

ALTER TABLE "REPORT" ADD CONSTRAINT "FK_USER_TO_REPORT" FOREIGN KEY (
   "USER_NO"
)
REFERENCES "USER" (
   "USER_NO"
);

ALTER TABLE "MESSAGE" ADD CONSTRAINT "FK_USER_TO_MESSAGE" FOREIGN KEY (
   "SENDER_NO"
)
REFERENCES "USER" (
   "USER_NO"
);

ALTER TABLE "CHATROOM" ADD CONSTRAINT "FK_USER_TO_CHATROOM_1" FOREIGN KEY (
   "USER_NO"
)
REFERENCES "USER" (
   "USER_NO"
);

ALTER TABLE "CHATROOM" ADD CONSTRAINT "FK_USER_TO_CHATROOM_2" FOREIGN KEY (
   "MANAGER_NO"
)
REFERENCES "USER" (
   "USER_NO"
);


ALTER TABLE "CHATTING" ADD CONSTRAINT "FK_USER_TO_CHATTING" FOREIGN KEY (
   "SENDER_NO"
)
REFERENCES "USER" (
   "USER_NO"
);

ALTER TABLE "RESERVATION" ADD CONSTRAINT "FK_USER_TO_RESERVATION" FOREIGN KEY (
   "USER_NO"
)
REFERENCES "USER" (
   "USER_NO"
);

ALTER TABLE "ACC_REVIEW" ADD CONSTRAINT "FK_USER_TO_ACC_REVIEW" FOREIGN KEY (
   "USER_NO"
)
REFERENCES "USER" (
   "USER_NO"
);

ALTER TABLE "RESTAURANT_REVIEW" ADD CONSTRAINT "FK_USER_TO_RESTAURANT_REVIEW" FOREIGN KEY (
   "USER_NO"
)
REFERENCES "USER" (
   "USER_NO"
);


-- 채팅룸 - 채팅 연결
ALTER TABLE "CHATTING" ADD CONSTRAINT "FK_CHATROOM_TO_CHATTING" FOREIGN KEY (
   "CHATROOM_NO"
)
REFERENCES "CHATROOM" (
   "CHATROOM_NO"
)ON DELETE CASCADE;


-- 신고 - 댓글, 게시글 연결
ALTER TABLE "REPORT" ADD CONSTRAINT "FK_COMMENT_TO_REPORT" FOREIGN KEY (
   "REPLY_NO"
)
REFERENCES "COMMENT" (
   "COMMENT_NO"
);

ALTER TABLE "REPORT" ADD CONSTRAINT "FK_BOARD_TO_REPORT" FOREIGN KEY (
   "BOARD_NO"
)
REFERENCES "BOARD" (
   "BOARD_NO"
);


-- 게시판 - 댓글 연결
ALTER TABLE "COMMENT" ADD CONSTRAINT "FK_BOARD_TO_COMMENT" FOREIGN KEY (
   "BOARD_NO"
)
REFERENCES "BOARD" (
   "BOARD_NO"
);

-- 게시판 - 축제 연결
ALTER TABLE "FESTIVAL" ADD CONSTRAINT "FK_BOARD_TO_FESTIVAL" FOREIGN KEY (
   "BOARD_NO"
)
REFERENCES "BOARD" (
   "BOARD_NO"
);


-- 숙소 예약 - 객실 연결
ALTER TABLE "ACC_RESERVATION" ADD CONSTRAINT "FK_ACC_GRADE_TO_ACC_RESERVATION" FOREIGN KEY (
   "ACC_CODE"
)
REFERENCES "ACC_GRADE" (
   "ACC_CODE"
);

-- 숙소 - 숙소 이미지 연결
ALTER TABLE "ACC_IMAGE" ADD CONSTRAINT "FK_ACC_TO_ACC_IMAGE" FOREIGN KEY (
   "ACC_NO"
)
REFERENCES "ACC" (
   "ACC_NO"
) ON DELETE CASCADE;


-- 숙소리뷰 - 평점 연결
ALTER TABLE "ACC_RATE" ADD CONSTRAINT "FK_ACC_REVIEW_TO_ACC_RATE" FOREIGN KEY (
   "A_REVIEW_NO"
)
REFERENCES "ACC_REVIEW" (
   "A_REVIEW_NO"
);


-- 게시판 - 게시판 종류 연결
ALTER TABLE "BOARD" ADD CONSTRAINT "FK_BOARD_TYPE_TO_BOARD" FOREIGN KEY (
   "BOARD_CODE"
)
REFERENCES "BOARD_TYPE" (
   "BOARD_CODE"
);

-- 투표 - 선택지 연결
ALTER TABLE "OPTION" ADD CONSTRAINT "FK_POLL_TO_OPTION" FOREIGN KEY (
   "BOARD_NO"
)
REFERENCES "POLL" (
   "BOARD_NO"
);




-------- 시퀀스 추가-------------------------------------------
CREATE SEQUENCE SEQ_USER_NO NOCACHE; -- 회원번호
CREATE SEQUENCE SEQ_ACC_NO NOCACHE; -- 숙소
CREATE SEQUENCE SEQ_ACC_IMG_NO NOCACHE; -- 숙소 이미지 번호
CREATE SEQUENCE SEQ_RATE_NO NOCACHE; -- 숙소 평점 번호
CREATE SEQUENCE SEQ_A_REV_NO NOCACHE; -- 숙소 리뷰 번호
CREATE SEQUENCE SEQ_RES_NO NOCACHE; -- 예약 번호
CREATE SEQUENCE SEQ_R_REV_NO NOCACHE;  -- 맛집 리뷰 번호
CREATE SEQUENCE SEQ_BOARD_NO NOCACHE; -- 게시글 번호
CREATE SEQUENCE SEQ_COMMENT_NO NOCACHE; -- 댓글 번호 
CREATE SEQUENCE SEQ_MESSAGE_NO NOCACHE; -- 쪽지 번호
CREATE SEQUENCE SEQ_CHATROOM_NO NOCACHE; -- 채팅방 번호
CREATE SEQUENCE SEQ_CHAT_NO NOCACHE; -- 채팅 번호
CREATE SEQUENCE SEQ_OPTION_NO NOCACHE; -- option 번호(투표)
CREATE SEQUENCE SEQ_A_GRADE_NO NOCACHE;

-------------------------------- 더미데이터 작업 시작 ---------------------------------------


-- 회원 , 관리자 더미데이터
INSERT INTO "USER" VALUES(SEQ_USER_NO.NEXTVAL,'관리자쨩','20010101','M','주소','admin01','$2a$10$vdsGrVXvJp3OsSfFCgYZpev8mVHaqDhC.smXgz8OisUeRgFDLReZ6','나는관리자','01012341234','admin@naver.com',sysdate,'',default,3);
INSERT INTO "USER" VALUES(SEQ_USER_NO.NEXTVAL,'이순신','20010101','M','asd','user01','$2a$10$vdsGrVXvJp3OsSfFCgYZpev8mVHaqDhC.smXgz8OisUeRgFDLReZ6','나는장군','01012341234','jimin10722@naver.com',sysdate,'',default,1);
INSERT INTO "USER" VALUES(SEQ_USER_NO.NEXTVAL,'사업자','20010101','M','qwe','boss01','$2a$10$vdsGrVXvJp3OsSfFCgYZpev8mVHaqDhC.smXgz8OisUeRgFDLReZ6','나는사업자','01012341234','jimin10723@naver.com',sysdate,'',default,2);
INSERT INTO "USER" VALUES(SEQ_USER_NO.NEXTVAL,'유저','20010101','M','zxc','user02','$2a$10$vdsGrVXvJp3OsSfFCgYZpev8mVHaqDhC.smXgz8OisUeRgFDLReZ6','나는유저','01012341234','jimin1074@naver.com',sysdate,'',default,1);
INSERT INTO "BOSS" VALUES('1231231234', '1231231234', 3); 
commit;

-- 게시판 카테고리
INSERT INTO BOARD_TYPE VALUES(1,'공지사항');
INSERT INTO BOARD_TYPE VALUES(2,'국내축제 게시판');
INSERT INTO BOARD_TYPE VALUES(3,'투표 게시판');
INSERT INTO BOARD_TYPE VALUES(4,'자유 게시판');



-- 샘플 유저
INSERT INTO "USER" VALUES(SEQ_USER_NO.NEXTVAL,'유재신','19931001','M','asd','user03','$2a$10$vdsGrVXvJp3OsSfFCgYZpev8mVHaqDhC.smXgz8OisUeRgFDLReZ6','짱짱','01020189926','sunnyy215@naver.com',sysdate,'',default,2);

INSERT INTO "USER" VALUES(SEQ_USER_NO.NEXTVAL,'장두연','19951212','F','경기도 어딘가 저리고리','user04','$2a$10$vdsGrVXvJp3OsSfFCgYZpev8mVHaqDhC.smXgz8OisUeRgFDLReZ6','숙소짱','01066665555','sunnyy215@naver.com',sysdate,'',default,2);
commit;
         </code>
     </pre>
</details>

<br>
<br>
 <h2 style="border-bottom: 1px solid #d8dee4; color: #282d33;"> notion 주소 </h2>
 <span><a href="https://amplified-success-14b.notion.site/8853f975f871414a852773459256657a">세미프로젝트</a></span>
 <br>
 <br>
 <br>
 <br>
    <div style="text-align: left;"> <a href=https://blog.naver.com/jimin10722> <img src="https://img.shields.io/badge/Naver-03C75A?style=for-the-badge&logo=Naver&logoColor=white&link=https://blog.naver.com/jimin10722"> </a>
         <a href=mailto:iamjimin0722@gmail.com> <img src="https://img.shields.io/badge/Gmail-EA4335?style=for-the-badge&logo=Gmail&logoColor=white&link=mailto:iamjimin0722@gmail.com"> </a>
          </div>  <br> 
    <div style="text-align: left;"> <a href="https://hits.seeyoufarm.com"> <img src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fgithub.com%2Fjimin1012%2F&count_bg=%23000000&title_bg=%23000000&icon=github.svg&icon_color=%23FFFFFF&title=GitHub&edge_flat=false"/></a>
       </div> 
    <div style="text-align: left;"> 
    <h2 style="border-bottom: 1px solid #d8dee4; color: #282d33;"> 🏅 Stats </h2> <div style="text-align: left;"> <img src="https://github-readme-stats.vercel.app/api?username=jimin1012&bg_color=180,000000,&title_color=000000&text_color=000000"
         /> <img src="https://github-readme-stats.vercel.app/api/top-langs/?username=jimin1012&layout=compact&bg_color=180,000000,&title_color=000000&text_color=000000"
          /> </div> 
    </div>
    
